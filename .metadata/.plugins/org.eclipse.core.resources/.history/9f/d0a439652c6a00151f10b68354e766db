package experimentos;

import java.io.File;
import java.io.IOException;
import java.io.PrintWriter;
import java.net.URISyntaxException;
import java.nio.file.Files;
import java.nio.file.Paths;
import java.util.Hashtable;
import java.util.Random;

import algoritmos.KnuthMorrisPrattV2;
import algoritmos.TextSearcher;

public class Main {
	public static void main(String[] args) throws IOException, URISyntaxException { 
     
		int numero_de_patrones = 1;
		
		String alfabeto_binario_path = "";
		String adn_real_path = "";
		String adn_sintético = "";
		String lenguaje_natural_real_path = "";
		String lenguaje_natural_sintetico_path = "";
		
		TextSearcher fuerza_bruta = null;
		TextSearcher kmp = new KnuthMorrisPrattV2("");
		TextSearcher bm = null;
		
		String fuerza_bruta_output_path = "";
		String kmp_output_path = "";
		String bm_output_path = "";
		
		PrintWriter[] outputs = {
				new PrintWriter(fuerza_bruta_output_path, "UTF-8"),
				new PrintWriter(kmp_output_path, "UTF-8"),
				new PrintWriter(bm_output_path, "UTF-8")
		};
		
		TextSearcher[] algoritms = {
				fuerza_bruta,
				kmp,
				bm
		};
		
		String[] files = { 
				alfabeto_binario_path, 
				adn_real_path, 
				adn_sintético, 
				lenguaje_natural_real_path, 
				lenguaje_natural_sintetico_path 
		};
		Patterns[] patterns = { 
				new BinaryPatterns(numero_de_patrones), 
				new TextPatterns(numero_de_patrones,adn_real_path),
				new TextPatterns(numero_de_patrones,adn_sintético),
				new TextPatterns(numero_de_patrones,lenguaje_natural_real_path),
				new TextPatterns(numero_de_patrones,lenguaje_natural_sintetico_path)
		};	
		
		
		Hashtable<String, Patterns> patternsHash = new Hashtable<String, Patterns>();
		for(int i=0;i<files.length;i++,patternsHash.put(files[i], patterns[i]));
		
		Hashtable<TextSearcher, PrintWriter> outputs_path_hash = new Hashtable<TextSearcher, PrintWriter>();
		for(int i=0;i<algoritms.length;i++,outputs_path_hash.put(algoritms[i], outputs[i]));
		
		Patterns pattern;
		PrintWriter autput_file;
		String text;
		for (String file_path : files) {
			text = getText(file_path); 
			for (TextSearcher algoritm : algoritms){
				pattern = patternsHash.get(file_path);
				autput_file = outputs_path_hash.get(algoritm);
				new Experimento(algoritm,pattern,text,autput_file,file_path);
			}
		}
		
		for (PrintWriter output : outputs){
			output.close();
		}
	
	}  
	
	public static String getText(String path) throws IOException{
		return new String(Files.readAllBytes(Paths.get(path)));
	}
	
	/*public static void main(String[] args){
		int l=1;
		String x = "ho";
		Random randomWord = new Random();
		int a = randomWord.nextInt(x.length()-l+1);
		System.out.println(x.substring(a, a+l));	
	}*/
	
	/*public static void main(String[] args){
		String[] to_return = new String[3];
		Random randomWord = new Random();
		String x;
		for(int i=0; i<3;i++) {
			x="";
			for(int j=0;j<128;j++) {
				x += Integer.toString(randomWord.nextInt(2));
			}
			to_return[i]=x;
		}
		System.out.println(to_return[0]);
		System.out.println(to_return[1]);
		System.out.println(to_return[2]);
		System.out.println(to_return[2].length());
	}*/
	
	
}
